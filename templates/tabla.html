<!DOCTYPE html>
<html>
<head>
<title>¿Cuándo Abre? - Tabla</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style type="text/css">
tr:nth-child(even) {background: #CCC}
tr:nth-child(odd) {background: #FFF}
</style>
<script type="text/javascript">
var loc;
function updateLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function (p){
            loc = p;
            x = document.getElementById('testPos');
            x.innerHTML = "Latitud: " + loc.coords.latitude + "<br/>Longitud: " +
            loc.coords.longitude;
        });
    }
}
updateLocation();
function doFiltering() {
    value = document.getElementById("filterBox").value.toUpperCase();
    rows = document.getElementById("hoursTable").getElementsByTagName("tr");
    
    for (i = 0; i < rows.length; i++) {
        cell = rows[i].getElementsByTagName("td")[0];
        if (cell) {
            if (cell.innerHTML.toUpperCase().indexOf(value) > -1) {
                rows[i].style.display = "table-row";
            } else {
                rows[i].style.display = "none";
            }
        }
    }
}
</script>
</head>
<body>
<div id="testPos" style="display: none;">(Esperando una localización…)</div>

<table id="hoursTable">
<tr>
<th>Lugar</th>
<th>¿Abierto?</th>
<th>Horarios</th>
</tr>
<tr>
<th><input type="text" id="filterBox" onkeyup="doFiltering()" placeholder="Filtrar…"/></th>
<th></th>
<th></th>
</tr>
{% set opening_state = {'open': '<span style="color: green;">✓</span>', 
                        'closed': '<span style="color: red;">✘</span>', 
                        'unknown': '?'}
   
%}
{% for node in nodes %}
 <tr>
  <td><a href="{{ node.url }}">{{ node.name }}</a></td>
  <td>{{ opening_state[node.open]|safe }}</td>
  <td>{{ node.hours }}</td>
 </tr>
{% endfor %}

</table>
</body>
</html>